(this["webpackJsonpmedieval-quests"]=this["webpackJsonpmedieval-quests"]||[]).push([[0],{16:function(e,t,n){e.exports=n(27)},21:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),c=n.n(o),i=(n(21),n(1)),u=n.n(i),s=n(10),l=n(3),d=n(6),p=n(5),m=n(4),h=(n(23),n(2)),v=n(12),f=n(7),b=n(15),O=new h.c.Socket("Response"),j=new h.c.Socket("Conditions"),w=new h.c.Socket("LogicalAnd");w.combineWith(j);var y=new h.c.Socket("LogicalOr");y.combineWith(j);var k=new h.c.Socket("LogicalThen");k.combineWith(O);var C=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={text:a.props.text},a.onUpdate=e.onUpdate,void 0===a.onUpdate&&(a.onUpdate=function(){}),a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){e.text!==this.props.text?this.setState({text:this.props.text}):t.text!==this.state.text&&this.onUpdate(this.state.text)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.label,":",r.a.createElement("br",null),r.a.createElement("div",{className:"text-fragment",title:this.state.text},this.state.text),r.a.createElement("input",{type:"button",value:"...",onClick:function(t){return e.setState({text:prompt("Enter Text:",e.state.text)})}}))}}]),n}(r.a.Component),E=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={label:"Greeting"},a}return n}(C),g=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={label:"Player Response"},a}return n}(C),x=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={label:"NPC Speech"},a}return n}(C),N=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={label:"Farewell"},a}return n}(C),R=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={conditions:[],selectedCondition:"has_item",selectedParam:"exactly",paramNameValue:"",paramQtyValue:0},a.definitions=[{name:"Has Item",id:"has_item",params:[{name:"Item Name",id:"item_name",value:""},{name:"Logical Comparison",id:"comparison",value:"exactly",values:[{name:"=",id:"exactly"},{name:">",id:"morethan"},{name:"<",id:"lessthan"},{name:">=",id:"morethanorequal"},{name:"<=",id:"lessthanorequal"},{name:"!=",id:"notequal"}]},{name:"Quantity",id:"qty"}]}],a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[];for(var n in this.definitions){var a=this.definitions[n],o=!1;this.state.selectedCondition===a.id&&(o=!0),t.push(r.a.createElement("option",{value:o},a.name))}var c=this.definitions.filter((function(t){return t.id===e.state.selectedCondition})),i=[];if(c.length>0){var u=(c=c[0]).params.filter((function(e){return"comparison"===e.id}));if(u.length>0&&void 0!==u[0].values)for(var s in(u=u[0]).values){var l=!1;this.state.selectedParam===u.values[s].id&&(l=!0),i.push(r.a.createElement("option",{value:l},u.values[s].name))}}return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{className:"condition-name"},t),r.a.createElement("input",{className:"condition-param-name",type:"text",value:this.state.paramNameValue,onChange:function(t){return e.setState({paramNameValue:t.target.value})}}),r.a.createElement("br",null),r.a.createElement("select",{className:"condition-logic"},i),r.a.createElement("input",{type:"text",value:this.state.paramQtyValue,className:"condition-param-qty",onChange:function(t){return e.setState({paramQtyValue:t.target.value})}}))}}]),n}(r.a.Component),S=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,a)).render="react",o.component=E,o.props={emitter:e,name:r,onUpdate:function(e){return o.putData(a,e)}},o}return n}(h.c.Control),I=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,a)).render="react",o.component=N,o.props={emitter:e,name:r,onUpdate:function(e){return o.putData(a,e)}},o}return n}(h.c.Control),T=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,a)).render="react",o.component=R,o.props={emitter:e,name:r},o}return n}(h.c.Control),U=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,a)).render="react",o.component=g,o.props={emitter:e,name:r,onUpdate:function(e){return o.putData(a,e)}},o}return n}(h.c.Control),D=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,a)).render="react",o.component=x,o.props={emitter:e,name:r,onUpdate:function(e){return o.putData(a,e)}},o}return n}(h.c.Control),q=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.node,n=e.bindSocket,a=e.bindControl,o=this.state,c=o.outputs,i=o.controls,u=o.inputs,s=o.selected;return r.a.createElement("div",{className:"node ".concat(s)},r.a.createElement("div",{className:"title"},t.name),c.map((function(e){return r.a.createElement("div",{className:"output",key:e.key},r.a.createElement("div",{className:"output-title"},e.name),r.a.createElement(f.c,{type:"output",socket:e.socket,io:e,innerRef:n}))})),i.map((function(e){return r.a.createElement(f.a,{className:"control",key:e.key,control:e,innerRef:a})})),u.map((function(e){return r.a.createElement("div",{className:"input",key:e.key},r.a.createElement(f.c,{type:"input",socket:e.socket,io:e,innerRef:n}),!e.showControl()&&r.a.createElement("div",{className:"input-title"},e.name),e.showControl()&&r.a.createElement(f.a,{className:"input-control",control:e.control,innerRef:a}))})))}}]),n}(f.b),V=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,"Conversation Start")).data.component=q,e}return Object(d.a)(n,[{key:"builder",value:function(e){var t=new h.c.Output("condition","Conditions",j),n=new S(this.editor,"text",e),a=new h.c.Output("logicalThen","Then",k);e.addControl(n).addOutput(t).addOutput(a)}}]),n}(h.c.Component),A=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,"Conversation End")).data.component=q,e}return Object(d.a)(n,[{key:"builder",value:function(e){var t=new h.c.Input("response","Response",O,!0),n=new h.c.Input("condition","Conditions",j);e.addControl(new I(this.editor,"text",e)),e.addInput(t).addInput(n)}}]),n}(h.c.Component),Q=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,"Condition")).data.component=q,e}return Object(d.a)(n,[{key:"builder",value:function(e){var t=new h.c.Input("conditions","Condition",j);e.addInput(t);var n=new h.c.Output("logicalAnd","AND",w),a=new h.c.Output("logicalOr","OR",y),r=new h.c.Output("logicalThen","Then",k);e.addControl(new T(this.editor,"text",e)),e.addOutput(n),e.addOutput(a),e.addOutput(r)}}]),n}(h.c.Component),W=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,"Response")).data.component=q,e}return Object(d.a)(n,[{key:"builder",value:function(e){var t=new h.c.Input("response","Response",O);e.addInput(t);var n=new h.c.Output("conditions","Conditions",j),a=new h.c.Output("logicalThen","Then",k);e.addOutput(n).addOutput(a),e.addControl(new U(this.editor,"text",e))}},{key:"worker",value:function(e,t,n){n.response=e.data.responses}}]),n}(h.c.Component),L=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this,"Speech")).data.component=q,e}return Object(d.a)(n,[{key:"builder",value:function(e){var t=new h.c.Input("response","Response",O);e.addInput(t);var n=new h.c.Output("conditions","Conditions",j),a=new h.c.Output("logicalThen","Then",k);e.addOutput(n).addOutput(a),e.addControl(new D(this.editor,"text",e))}},{key:"worker",value:function(e,t,n){n.response=e.data.responses}}]),n}(h.c.Component),M=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).reteRef=r.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.initializeRete()}},{key:"initializeRete",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,r,o,c,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new h.c.NodeEditor("demo@0.1.0",this.reteRef.current)).use(v.a),t.use(f.d,{component:q}),n=new V,t.register(n),a=new W,t.register(a),r=new Q,t.register(r),o=new A,t.register(o),c=new L,t.register(c),(i=new h.c.Engine("demo@0.1.0")).register(n),i.register(a),e.next=18,n.createNode();case 18:l=e.sent,t.addNode(l),t.use(b.a,{searchBar:!1,delay:100,allocate:function(e){return["Submenu"]},items:{}}),t.on("click",function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.editor=t;case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){console.log(this.editor.toJSON())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"Medieval-Quests Editor",r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:"Export",onClick:function(){return e.export()}})),r.a.createElement("div",{id:"rete",className:"Rete",ref:this.reteRef}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.e45e0a6c.chunk.js.map